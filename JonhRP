--==[ JONHSCRIPTS BROOKHAVEN GUI (FINAL + ANIMADO) ]==--

local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local TweenService = game:GetService("TweenService")
local UIS = game:GetService("UserInputService")

--==================== GUI BASE ====================--

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = Player:WaitForChild("PlayerGui")
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.ResetOnSpawn = false

-- Frame principal
local Frame = Instance.new("Frame")
Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(52, 40, 61)
Frame.BackgroundTransparency = 0.2
Frame.Position = UDim2.new(0.15, 0, 0.1, 0)
Frame.Size = UDim2.new(0, 800, 0, 500)
Frame.Active = true
Frame.Draggable = true
Frame.Visible = false

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0, 99)

--==================== TÍTULO ====================--

local Title = Instance.new("TextLabel")
Title.Parent = Frame
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0.35, 0, 0, 0)
Title.Size = UDim2.new(0, 300, 0, 50)
Title.Font = Enum.Font.FredokaOne
Title.Text = "JONHSCRIPTS BROOKHAVEN"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.TextSize = 20

--==================== BOTONES ====================--

local function makeButton(name, pos, text)
	local b = Instance.new("TextButton")
	b.Name = name
	b.Parent = Frame
	b.Size = UDim2.new(0, 135, 0, 52)
	b.Position = pos
	b.BackgroundColor3 = Color3.new(1, 1, 1)
	b.BackgroundTransparency = 0.3
	b.Font = Enum.Font.FredokaOne
	b.Text = text
	b.TextColor3 = Color3.new(0, 0, 0)
	b.TextSize = 14
	local c = Instance.new("UICorner", b)
	return b
end

local JumpButton = makeButton("JumpButton", UDim2.new(0.0225, 0, 0.176, 0), "INF JUMP")
local VelocityButton = makeButton("VelocityButton", UDim2.new(0.3975, 0, 0.176, 0), "Velocity")
local VelocityMinus = makeButton("VelocityMinus", UDim2.new(0.333, 0, 0.182, 0), "-")
VelocityMinus.Size = UDim2.new(0, 43, 0, 45)
local VelocityPlus = makeButton("VelocityPlus", UDim2.new(0.578, 0, 0.182, 0), "+")
VelocityPlus.Size = UDim2.new(0, 43, 0, 45)
local NoclipButton = makeButton("NoclipButton", UDim2.new(0.7875, 0, 0.176, 0), "Noclip")
local ESPButton = makeButton("ESPButton", UDim2.new(0.0225, 0, 0.45, 0), "ESP PLAYER")
local InvisibleButton = makeButton("InvisibleButton", UDim2.new(0.7875, 0, 0.468, 0), "INVISIBLE")
local SpawnButton = makeButton("SpawnButton", UDim2.new(0.3975, 0, 0.666, 0), "Spawn Limo")

--==================== MEDIDOR ====================--

local MedidorLabel = Instance.new("TextLabel")
MedidorLabel.Parent = Frame
MedidorLabel.Position = UDim2.new(0.45, 0, 0.29, 0)
MedidorLabel.Size = UDim2.new(0, 104, 0, 34)
MedidorLabel.BackgroundColor3 = Color3.new(1, 1, 1)
MedidorLabel.BackgroundTransparency = 0.3
MedidorLabel.Font = Enum.Font.SourceSans
MedidorLabel.TextColor3 = Color3.new(0, 0, 0)
MedidorLabel.Text = "0"
MedidorLabel.TextSize = 14
Instance.new("UICorner", MedidorLabel)

--==================== BOLA AZUL (TOGGLE) ====================--

local ToggleBall = Instance.new("TextButton")
ToggleBall.Parent = ScreenGui
ToggleBall.Size = UDim2.new(0, 50, 0, 50)
ToggleBall.Position = UDim2.new(0.05, 0, 0.5, 0)
ToggleBall.BackgroundColor3 = Color3.fromRGB(0, 102, 255)
ToggleBall.Text = ""
ToggleBall.Active = true
ToggleBall.Draggable = true
ToggleBall.ZIndex = 10
Instance.new("UICorner", ToggleBall).CornerRadius = UDim.new(1, 0)

--==================== ANIMACIÓN DE APERTURA ====================--

local function animateFrame(show)
	local goal = {}
	if show then
		goal.Size = UDim2.new(0, 800, 0, 500)
		goal.Position = UDim2.new(0.15, 0, 0.1, 0)
	else
		goal.Size = UDim2.new(0, 800, 0, 0)
		goal.Position = UDim2.new(0.15, 0, 0.6, 0)
	end
	local tween = TweenService:Create(Frame, TweenInfo.new(0.4, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), goal)
	tween:Play()
	if show then
		Frame.Visible = true
	else
		task.wait(0.4)
		Frame.Visible = false
	end
end

ToggleBall.MouseButton1Click:Connect(function()
	if Frame.Visible then
		animateFrame(false)
	else
		animateFrame(true)
	end
end)

--==================== FUNCIONES ====================--

-- INF JUMP
local infJumpEnabled = false
JumpButton.MouseButton1Click:Connect(function()
	infJumpEnabled = not infJumpEnabled
	JumpButton.Text = infJumpEnabled and "INF JUMP [ON]" or "INF JUMP [OFF]"
end)

UIS.JumpRequest:Connect(function()
	if infJumpEnabled and Humanoid then
		Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- VELOCITY
local velocityEnabled = false
local currentSpeed = 16
local defaultSpeed = 25

local function updateMedidor()
	MedidorLabel.Text = tostring(currentSpeed)
end

VelocityButton.MouseButton1Click:Connect(function()
	velocityEnabled = not velocityEnabled
	if velocityEnabled then
		currentSpeed = defaultSpeed
		Humanoid.WalkSpeed = currentSpeed
		VelocityButton.Text = "Velocity [ON]"
	else
		currentSpeed = 16
		Humanoid.WalkSpeed = currentSpeed
		VelocityButton.Text = "Velocity [OFF]"
	end
	updateMedidor()
end)

VelocityPlus.MouseButton1Click:Connect(function()
	if velocityEnabled then
		currentSpeed = currentSpeed + 5
		Humanoid.WalkSpeed = currentSpeed
		updateMedidor()
	end
end)

VelocityMinus.MouseButton1Click:Connect(function()
	if velocityEnabled and currentSpeed > 5 then
		currentSpeed = currentSpeed - 5
		Humanoid.WalkSpeed = currentSpeed
		updateMedidor()
	end
end)

-- NOCLIP
local noclipEnabled = false
NoclipButton.MouseButton1Click:Connect(function()
	noclipEnabled = not noclipEnabled
	NoclipButton.Text = noclipEnabled and "Noclip [ON]" or "Noclip [OFF]"
end)

game:GetService("RunService").Stepped:Connect(function()
	if noclipEnabled and Character and Humanoid then
		for _, part in pairs(Character:GetChildren()) do
			if part:IsA("BasePart") then
				part.CanCollide = false
			end
		end
	end
end)

-- INVISIBLE
InvisibleButton.MouseButton1Click:Connect(function()
	if Character and Character:FindFirstChild("HumanoidRootPart") then
		for _, part in pairs(Character:GetDescendants()) do
			if part:IsA("BasePart") or part:IsA("Decal") then
				part.Transparency = 1
			end
		end
	end
end)

-- SPAWN LIMO
SpawnButton.MouseButton1Click:Connect(function()
	local rep = game:GetService("ReplicatedStorage")
	if rep:FindFirstChild("RE") and rep.RE:FindFirstChild("1Ca1r") then
		rep.RE["1Ca1r"]:FireServer("PickingCar", "Limo")
	end
end)

-- ESP
ESPButton.MouseButton1Click:Connect(function()
	for _, plr in pairs(game.Players:GetPlayers()) do
		if plr ~= Player and plr.Character then
			for _, part in pairs(plr.Character:GetChildren()) do
				if part:IsA("BasePart") then
					local highlight = Instance.new("Highlight")
					highlight.Parent = part
					highlight.FillTransparency = 1
					highlight.OutlineColor = Color3.fromRGB(0, 255, 0)
					highlight.OutlineTransparency = 0
				end
			end
		end
	end
end)

updateMedidor()
