-- AIM HEAD 95% FUERZA - Click derecho activa
-- By JONH

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")

local player = Players.LocalPlayer
local camera = Workspace.CurrentCamera

-- Variables
local aimActive = false
local teamCheck = true
local wallCheck = true
local connection = nil

-- ====== GUI RAINBOW "JONH" ======

local gui = Instance.new("ScreenGui")
gui.Name = "JONH_GUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 150, 0, 60)
mainFrame.Position = UDim2.new(0, 10, 0, 10)
mainFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
mainFrame.BackgroundTransparency = 0.3
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = gui

-- Texto "JONH" con efecto rainbow
local jonhText = Instance.new("TextLabel")
jonhText.Name = "JONHText"
jonhText.Size = UDim2.new(1, 0, 1, 0)
jonhText.BackgroundTransparency = 1
jonhText.Text = "JONH"
jonhText.TextColor3 = Color3.fromRGB(255, 0, 0)
jonhText.TextSize = 32
jonhText.Font = Enum.Font.GothamBlack
jonhText.Parent = mainFrame

-- Efecto rainbow
local rainbowTime = 0
RunService.RenderStepped:Connect(function(delta)
    rainbowTime = rainbowTime + delta
    local hue = (rainbowTime * 0.5) % 1
    jonhText.TextColor3 = Color3.fromHSV(hue, 1, 1)
end)

-- ====== FUNCIONES AIM ======

-- Verificar paredes
function hasWallBetween(pos1, pos2)
    if not wallCheck then return false end
    if not player.Character then return true end
    
    local direction = (pos2 - pos1).Unit
    local distance = (pos2 - pos1).Magnitude
    
    local raycastParams = RaycastParams.new()
    raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
    raycastParams.FilterDescendantsInstances = {player.Character}
    raycastParams.IgnoreWater = true
    
    local raycastResult = Workspace:Raycast(pos1, direction * distance, raycastParams)
    
    if raycastResult then
        local hit = raycastResult.Instance
        local hitPlayer = Players:GetPlayerFromCharacter(hit:FindFirstAncestorOfClass("Model"))
        return not hitPlayer
    end
    
    return false
end

-- Encontrar cabeza mÃ¡s cercana
function findClosestHead()
    if not player.Character then return nil end
    
    local myHead = player.Character:FindFirstChild("Head")
    if not myHead then return nil end
    
    local closestHead = nil
    local closestDistance = 500 -- Distancia mÃ¡xima
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player and otherPlayer.Character then
            local targetChar = otherPlayer.Character
            local humanoid = targetChar:FindFirstChildOfClass("Humanoid")
            local targetHead = targetChar:FindFirstChild("Head")
            
            if humanoid and humanoid.Health > 0 and targetHead then
                -- Team check SIEMPRE ACTIVO
                if teamCheck then
                    local teams = game:GetService("Teams"):GetTeams()
                    if #teams > 0 then
                        local myTeam = player.Team
                        local theirTeam = otherPlayer.Team
                        if myTeam and theirTeam and myTeam == theirTeam then
                            continue
                        end
                    end
                end
                
                -- Wall check SIEMPRE ACTIVO
                if hasWallBetween(myHead.Position, targetHead.Position) then
                    continue
                end
                
                -- Calcular distancia
                local distance = (myHead.Position - targetHead.Position).Magnitude
                
                if distance < closestDistance then
                    closestDistance = distance
                    closestHead = targetHead
                end
            end
        end
    end
    
    return closestHead
end

-- Activar aim con 95% FUERZA
function activateAim()
    if connection then connection:Disconnect() end
    
    connection = RunService.RenderStepped:Connect(function()
        if not aimActive then return end
        
        local head = findClosestHead()
        
        if head then
            -- AIM A LA CABEZA CON 95% FUERZA
            local currentCF = camera.CFrame
            local targetCF = CFrame.new(currentCF.Position, head.Position)
            
            -- 95% DE FUERZA COMO PEDISTE
            camera.CFrame = currentCF:Lerp(targetCF, 0.95)
        end
    end)
    
    aimActive = true
    print("âœ… AIM ACTIVADO - 95% FUERZA")
end

-- Desactivar aim
function deactivateAim()
    if connection then
        connection:Disconnect()
        connection = nil
    end
    
    aimActive = false
    print("âŒ AIM DESACTIVADO")
end

-- ====== CONTROLES SIMPLES ======

-- Click derecho ACTIVA
UserInputService.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        if not aimActive then
            activateAim()
        end
    end
end)

-- Soltar click derecho DESACTIVA
UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        if aimActive then
            deactivateAim()
        end
    end
end)

-- ====== INICIALIZACIÃ“N ======

print("========================================")
print("ðŸŽ¯ AIM HEAD 95% - BY JONH")
print("========================================")
print("âœ… GUI 'JONH' rainbow visible")
print("âœ… CLICK DERECHO = AIM ACTIVADO")
print("âœ… SOLTAR CLICK = AIM DESACTIVADO")
print("âœ… FUERZA: 95% (como pediste)")
print("âœ… Team Check: SIEMPRE ACTIVADO")
print("âœ… Wall Check: SIEMPRE ACTIVADO")
print("========================================")

-- Forzar que funcione
task.wait(0.5)
print("âœ… Sistema cargado y listo")
print("âœ… Presiona CLICK DERECHO para activar aim")

-- Asegurar que funcione despuÃ©s de respawn
player.CharacterAdded:Connect(function()
    task.wait(0.5)
    if aimActive then
        activateAim()
    end
end)
