-- GUI LocalScript
local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Esperar al PlayerGui (a veces tarda en inicializarse)
local playerGui = player:WaitForChild("PlayerGui")

-- Crear ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "QuantumGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Crear la bola flotante
local dragBall = Instance.new("ImageButton")
dragBall.Name = "DragBall"
dragBall.Size = UDim2.new(0, 70, 0, 70)
dragBall.Position = UDim2.new(0.9, 0, 0.8, 0)
dragBall.BackgroundTransparency = 1
dragBall.Image = "rbxassetid://10820112323"
dragBall.Parent = screenGui

-- Hacer la bola movible
local dragging, dragInput, mousePos, framePos
local UserInputService = game:GetService("UserInputService")

dragBall.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = true
		mousePos = input.Position
		framePos = dragBall.Position
	end
end)

dragBall.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement then
		dragInput = input
	end
end)

UserInputService.InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		local delta = input.Position - mousePos
		dragBall.Position = UDim2.new(
			framePos.X.Scale, framePos.X.Offset + delta.X,
			framePos.Y.Scale, framePos.Y.Offset + delta.Y
		)
	end
end)

dragBall.InputEnded:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 then
		dragging = false
	end
end)

-- Crear el panel
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 280, 0, 160)
frame.Position = UDim2.new(0.5, -140, 0.5, -80)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.Visible = false
frame.Parent = screenGui
Instance.new("UICorner", frame)

-- Borde rainbow
local stroke = Instance.new("UIStroke")
stroke.Thickness = 3
stroke.Parent = frame

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(255,0,0)),
	ColorSequenceKeypoint.new(0.2, Color3.fromRGB(255,255,0)),
	ColorSequenceKeypoint.new(0.4, Color3.fromRGB(0,255,0)),
	ColorSequenceKeypoint.new(0.6, Color3.fromRGB(0,255,255)),
	ColorSequenceKeypoint.new(0.8, Color3.fromRGB(0,0,255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255,0,255))
}
gradient.Rotation = 45
gradient.Parent = stroke

-- Animar gradiente
task.spawn(function()
	while true do
		for i = 0, 1, 0.01 do
			gradient.Offset = Vector2.new(i, 0)
			task.wait(0.03)
		end
	end
end)

-- Botón “Activar Lag Falso”
local button = Instance.new("TextButton")
button.Size = UDim2.new(0.6, 0, 0.3, 0)
button.Position = UDim2.new(0.2, 0, 0.35, 0)
button.Text = "Activar Lag Falso"
button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
button.TextColor3 = Color3.new(1, 1, 1)
button.Font = Enum.Font.GothamBold
button.TextScaled = true
Instance.new("UICorner", button)
button.Parent = frame

-- Alternar visibilidad del GUI al hacer clic en la bola
dragBall.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
end)

-- Conectar con la herramienta Quantum Cloner
button.MouseButton1Click:Connect(function()
	local backpack = player:WaitForChild("Backpack")
	local tool = backpack:FindFirstChild("Quantum Cloner") or player.Character:FindFirstChild("Quantum Cloner")
	if tool then
		tool:Activate()
	else
		warn("Quantum Cloner no encontrado en la mochila del jugador.")
	end
end)
