--// Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

--// Create RemoteEvent if it doesn't exist
local remoteEvent = Instance.new("RemoteEvent")
remoteEvent.Name = "SkinnyMode"
remoteEvent.Parent = ReplicatedStorage

--// Player variables
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

--// Create a simple button
local button = Instance.new("TextButton")
button.Name = "SkinnyButton"
button.Size = UDim2.new(0, 100, 0, 100)
button.Position = UDim2.new(0.8, 0, 0.7, 0)
button.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
button.Text = "SKINNY"
button.TextColor3 = Color3.new(1, 1, 1)
button.TextScaled = true
button.Font = Enum.Font.GothamBold
button.BorderSizePixel = 0
button.ZIndex = 10

-- Make it a circle
local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(1, 0)
uiCorner.Parent = button

-- Add to screen
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SkinnyGui"
screenGui.ResetOnSpawn = false
button.Parent = screenGui
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Toggle skinny mode
local isSkinny = false

local function toggleSkinny()
    isSkinny = not isSkinny
    remoteEvent:FireServer(isSkinny)
    button.BackgroundColor3 = isSkinny and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(255, 0, 0)
end

-- Connect button
button.MouseButton1Click:Connect(toggleSkinny)

-- Handle character respawn
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
end)

-- Server script (runs on the server)
if game:GetService("RunService"):IsServer() then
    local Players = game:GetService("Players")
    
    local function makeSkinny(character, isSkinny)
        for _, part in ipairs(character:GetDescendants()) do
            if part:IsA("BasePart") then
                if isSkinny then
                    -- Make parts skinny
                    part.Size = Vector3.new(0.5, part.Size.Y, 0.5)
                    part.CanCollide = false
                else
                    -- Reset to default size
                    part.Size = Vector3.new(2, 2, 1) -- Adjust these values as needed
                    part.CanCollide = true
                end
            end
        end
    end

    remoteEvent.OnServerEvent:Connect(function(player, isSkinny)
        if player.Character then
            makeSkinny(player.Character, isSkinny)
        end
    end)

    -- Reset on respawn
    Players.PlayerAdded:Connect(function(player)
        player.CharacterAdded:Connect(function(character)
            makeSkinny(character, false)
        end)
    end)
end
